 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title> Step Counter </title>
 </head>
 <body>
     <!-- <h1> This app measures the steps </h1> -->

     <h1> Now trying Accelerometer!! </h1>

     <p> X: <span id="alpha">  </span> </p>
     <p> Y: <span id="beta">  </span> </p>
     <p> Z: <span id="gamma">  </span> </p>

     <p> Read values: <span id="values">  </span> </p>
     <!-- <p> Total labels: <span id="labels">  </span> </p>
     <p> Total values of X: <span id="valX">  </span> </p> -->


     <!-- <p> Absolute: <span id="abs">  </span> </p> -->

     <!-- <ul id="recorder">

     </ul> -->

     <button id="start"> start </button>
     <button id="stop"> stop </button>

     <canvas id="chaetX" width="400" height="400"></canvas>
     <canvas id="chaetY" width="400" height="400"></canvas>
     <canvas id="chaetZ" width="400" height="400"></canvas>


 </body>

 <!-- <script src="./shake.js"></script> -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.4.1/chart.min.js "></script>
 <script>
    // grab all  DOM
    const a = document.querySelector('#alpha')
    const b = document.querySelector('#beta')
    const c = document.querySelector('#gamma')

    const start = document.querySelector('#start')
    const stop = document.querySelector('#stop')
    const values = document.querySelector('#values')

    // const labels = document.querySelector('#labels')
    // const valX = document.querySelector('#valX')

    

    // const abs = document.querySelector('#abs')

    // const startRecording = document.querySelector('#start')
    // const recorder = document.querySelector('#recorder')

    // let recording = false;

    // // handle orientation
    // const handleOrientation = (e) => {
    //     let absolute = e.absolute
    //     let alpha = e.alpha
    //     let beta = e.beta
    //     let gamma = e.gamma

    //     a.innerHTML = alpha
    //     b.innerHTML = beta
    //     c.innerHTML = gamma
    //     abs.innerHTML = absolute

    //     startRecording.addEventListener('click', () => {
    //         let li = document.createElement('li')
    //         li.innerHTML = `<span> Alpha: ${alpha} | Beta: ${beta} | Gamma: ${gamma} <span>`
    //         recorder.appendChild(li)
    //     })
    // }

    // // listen to deviceornentation event
    // window.addEventListener('deviceorientation', handleOrientation, false)

    // var myShakeEvent = new Shake({
    //     threshold: 1, // optional shake strength threshold
    //     timeout: 500 // optional, determines the frequency of event generation
    // });
    // myShakeEvent.start();

    // window.addEventListener('shake', shakeEventDidOccur, false);

    // //function to call when shake occurs
    // function shakeEventDidOccur () {

    //     //put your own code here etc.
    //     alert('shake!');
    // }

    let readings = []


    // define chart here
    const showChart = () => {

        let label = []
        let dataX = []
        let dataY = []
        let dataZ = []

        
        readings.forEach(value => {
            label.push(value.timestamp)
            dataX.push(value.x)
            dataY.push(value.y)
            dataZ.push(value.z)
        })
        

        // labels.innerHTML = label.length
        // valX.innerHTML = valX.length

        // draw X values
        var ctx1 = document.getElementById('chartX').getContext('2d');
        var myChart = new Chart(ctx1, {
            type: 'line',
            data: {
                labels: label,
                datasets: [{
                    label: ' X axis reading ',
                    data: dataX,
                    fill: false,
                    borderColor: 'blue',
                    tension: 0
                }]
            }
        });

        // draw Y values
        var ctx2 = document.getElementById('chartY').getContext('2d');
        var myChart = new Chart(ctx2, {
            type: 'line',
            data: {
                labels: label,
                datasets: [{
                    label: ' Y axis reading ',
                    data: dataY,
                    fill: false,
                    borderColor: 'red',
                    tension: 0
                }]
            }
        });

        // draw Z values
        var ctx3 = document.getElementById('chartZ').getContext('2d');
        var myChart = new Chart(ctx3, {
            type: 'line',
            data: {
                labels: label,
                datasets: [{
                    label: ' Z axis reading ',
                    data: dataZ,
                    fill: false,
                    borderColor: 'green',
                    tension: 0
                }]
            }
        });

    }


    // now, trying if accelerometer sensor api can achieve this



    let acl = new Accelerometer({frequency: 10})
    acl.addEventListener('reading', () => {
        a.innerHTML = acl.x
        b.innerHTML = acl.y
        c.innerHTML = acl.z

        const r = {
            x: acl.x,
            y: acl.y,
            z: acl.z,
            timestamp: acl.timestamp
        }

        readings.push(r)

        values.innerHTML = readings.length

    })

    start.addEventListener('click', () => {
        acl.start()
    })

    stop.addEventListener('click', () => {
        acl.stop()

        // populate reading values in the chart
        showChart()
    })

 </script>

 </html>